<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2024-04-29T10:29:26.551513872"><title>Exemple 7 : Menu | Help Instance</title><script type="application/json" id="virtual-toc-data">[{"id":"construction-du-menu-et-des-raccourcis","level":0,"title":"Construction du menu et des raccourcis","anchor":"#construction-du-menu-et-des-raccourcis"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.6.6-b224/app.css" rel="stylesheet"><link rel="manifest" href="site.webmanifest"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Exemple 7 : Menu | Help Instance"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Help Instance Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/ch09s07-exemple-7-menu.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Exemple 7 : Menu | Help Instance"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/ch09s07-exemple-7-menu.html#webpage",
    "url": "writerside-documentation/ch09s07-exemple-7-menu.html",
    "name": "Exemple 7 : Menu | Help Instance",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Help Instance Help"
}</script><!-- End Schema.org --></head><body data-id="ch09s07-Exemple-7-Menu" data-main-title="Exemple 7 : Menu" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="ch09-Chapitre-9-Interfaces-graphiques.md|Chapitre 9 : Interfaces graphiques"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Help Instance  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="ch09s07-Exemple-7-Menu" id="ch09s07-Exemple-7-Menu.md">Exemple 7 : Menu</h1><p id="-2o9vfi_190"><a href="https://github.com/profdenis/native1/tree/master/chap9/07_menu" id="-2o9vfi_191" data-external="true" rel="noopener noreferrer">Code</a></p><p id="-2o9vfi_192">La fonction <code class="code" id="-2o9vfi_193">main</code> cr&eacute;e une nouvelle application Fyne, une fen&ecirc;tre au sein de cette application avec le titre <span class="emphasis" id="-2o9vfi_194">&quot;Exemple 07 : Menu et raccourcis&quot;</span>, ainsi que des labels et des champs de texte. Voici une explication plus d&eacute;taill&eacute;e ligne par ligne :</p><ul class="list _bullet" id="-2o9vfi_195"><li class="list__item" id="-2o9vfi_196"><p id="-2o9vfi_197"><code class="code" id="-2o9vfi_198">a := app.New()</code> initialise une nouvelle application Fyne.</p></li><li class="list__item" id="-2o9vfi_199"><p id="-2o9vfi_200"><code class="code" id="-2o9vfi_201">w := a.NewWindow(&quot;Exemple 07 : Menu et raccourcis&quot;)</code> cr&eacute;e une nouvelle fen&ecirc;tre dans cette application avec le titre donn&eacute;.</p></li><li class="list__item" id="-2o9vfi_202"><p id="-2o9vfi_203"><code class="code" id="-2o9vfi_204">src, dst := makeSrcDstEntries()</code> initialise <code class="code" id="-2o9vfi_205">src</code> et <code class="code" id="-2o9vfi_206">dst</code>, o&ugrave; <code class="code" id="-2o9vfi_207">src</code> est un champ de texte &agrave; lignes multiples et <code class="code" id="-2o9vfi_208">dst</code> est un widget affichant du texte enrichi. L'entr&eacute;e <code class="code" id="-2o9vfi_209">dst</code> se met &agrave; jour pour afficher le texte de l'entr&eacute;e <code class="code" id="-2o9vfi_210">src</code> analys&eacute; en tant que Markdown.</p></li><li class="list__item" id="-2o9vfi_211"><p id="-2o9vfi_212">Ensuite, il cr&eacute;e un &eacute;l&eacute;ment de menu <span class="emphasis" id="-2o9vfi_213">&quot;Ouvrir&quot;</span> qui d&eacute;clenche l'ouverture d'une bo&icirc;te de dialogue pour s&eacute;lectionner un fichier Markdown (<code class="code" id="-2o9vfi_214">.md</code>). Le contenu du document s&eacute;lectionn&eacute; est d&eacute;fini dans les entr&eacute;es <code class="code" id="-2o9vfi_215">src</code> et <code class="code" id="-2o9vfi_216">dst</code> de l'application. Cet &eacute;l&eacute;ment de menu est &eacute;galement li&eacute; au raccourci clavier <code class="code" id="-2o9vfi_217">Ctrl-O</code>.</p></li><li class="list__item" id="-2o9vfi_218"><p id="-2o9vfi_219">Un menu principal (<code class="code" id="-2o9vfi_220">mainMenu</code>) est ensuite cr&eacute;&eacute;, qui comprend l'&eacute;l&eacute;ment de menu <span class="emphasis" id="-2o9vfi_221">&quot;Ouvrir&quot;</span> et un &eacute;l&eacute;ment de menu <span class="emphasis" id="-2o9vfi_222">&quot;Enregistrer&quot;</span>. Lorsque l'on clique sur l'&eacute;l&eacute;ment de menu <span class="emphasis" id="-2o9vfi_223">&quot;Enregistrer&quot;</span>, une bo&icirc;te de dialogue de fichier s'ouvre pour sauvegarder le contenu actuel de l'entr&eacute;e <code class="code" id="-2o9vfi_224">src</code> en tant que fichier Markdown.</p></li><li class="list__item" id="-2o9vfi_225"><p id="-2o9vfi_226"><code class="code" id="-2o9vfi_227">w.SetMainMenu(mainMenu)</code> d&eacute;finit le <code class="code" id="-2o9vfi_228">mainMenu</code> dans la fen&ecirc;tre.</p></li><li class="list__item" id="-2o9vfi_229"><p id="-2o9vfi_230">Un s&eacute;parateur (ou diviseur) horizontal est cr&eacute;&eacute;, qui s&eacute;pare les entr&eacute;es <code class="code" id="-2o9vfi_231">src</code> et <code class="code" id="-2o9vfi_232">dst</code>.</p></li><li class="list__item" id="-2o9vfi_233"><p id="-2o9vfi_234"><code class="code" id="-2o9vfi_235">w.SetContent(container.NewBorder(filename, nil, nil, nil, split))</code> cr&eacute;e un nouveau conteneur avec le label <code class="code" id="-2o9vfi_236">filename</code>, qui est mis &agrave; jour avec le chemin du fichier actuellement ouvert, en haut, et le s&eacute;parateur cr&eacute;&eacute; au centre.</p></li><li class="list__item" id="-2o9vfi_237"><p id="-2o9vfi_238"><code class="code" id="-2o9vfi_239">w.Resize(fyne.NewSize(800, 600))</code> d&eacute;finit ensuite la taille de la fen&ecirc;tre &agrave; <code class="code" id="-2o9vfi_240">800x600</code> pixels.</p></li><li class="list__item" id="-2o9vfi_241"><p id="-2o9vfi_242"><code class="code" id="-2o9vfi_243">w.ShowAndRun()</code> affiche enfin la fen&ecirc;tre et commence la boucle principale de l'application.</p></li></ul><section class="chapter"><h2 id="construction-du-menu-et-des-raccourcis" data-toc="construction-du-menu-et-des-raccourcis">Construction du menu et des raccourcis</h2><ol class="list _decimal" id="-2o9vfi_244" type="1"><li class="list__item" id="-2o9vfi_245"><p id="-2o9vfi_246">Un &eacute;l&eacute;ment de menu <span class="emphasis" id="-2o9vfi_247">&quot;Ouvrir&quot;</span> est cr&eacute;&eacute; avec l'appel <code class="code" id="-2o9vfi_248">fyne.NewMenuItem(&quot;Open&quot;, getOpenMenuFunc(w, src, dst, filename))</code>. Ici, <span class="emphasis" id="-2o9vfi_249">&quot;Open&quot;</span> est le texte qui appara&icirc;tra dans l'&eacute;l&eacute;ment de menu, et <code class="code" id="-2o9vfi_250">getOpenMenuFunc(w, src, dst, filename)</code> est la fonction qui sera ex&eacute;cut&eacute;e lorsque l'&eacute;l&eacute;ment de menu sera cliqu&eacute;. La fonction <code class="code" id="-2o9vfi_251">getOpenMenuFunc</code> retourne une autre fonction qui ouvre un dialogue de s&eacute;lection de fichier lorsque l'utilisateur clique sur le bouton &quot;Open&quot;. Le fichier s&eacute;lectionn&eacute; sera lu et son contenu sera affich&eacute; dans les widgets <code class="code" id="-2o9vfi_252">src</code> et <code class="code" id="-2o9vfi_253">dst</code>.</p></li><li class="list__item" id="-2o9vfi_254"><p id="-2o9vfi_255">L'ic&ocirc;ne et le raccourci de l'&eacute;l&eacute;ment de menu <span class="emphasis" id="-2o9vfi_256">&quot;Ouvrir&quot;</span> sont d&eacute;finis avec les deux instructions suivantes :</p><div class="code-block" data-lang="go">
openMenuItem.Icon = theme.DocumentIcon()
openMenuItem.Shortcut = &amp;desktop.CustomShortcut{
        KeyName:  fyne.KeyO,
        Modifier: fyne.KeyModifierShortcutDefault,
}
</div><p id="-2o9vfi_258">Ici, <code class="code" id="-2o9vfi_259">theme.DocumentIcon()</code> est une ic&ocirc;ne standard pr&eacute;sente dans la biblioth&egrave;que Fyne et <code class="code" id="-2o9vfi_260">desktop.CustomShortcut{KeyName: fyne.KeyO, Modifier: fyne.KeyModifierShortcutDefault}</code> est un raccourci qui sera d&eacute;clench&eacute; lorsque l'utilisateur appuie sur <span class="emphasis" id="-2o9vfi_261">&quot;Cmd+O&quot;</span> (sur macOS) ou <span class="emphasis" id="-2o9vfi_262">&quot;Ctrl+O&quot;</span> (sur Windows/Linux).</p></li><li class="list__item" id="-2o9vfi_263"><p id="-2o9vfi_264">Le raccourci est &eacute;galement ajout&eacute; au Canvas de la fen&ecirc;tre avec <code class="code" id="-2o9vfi_265">w.Canvas().AddShortcut(openMenuItem.Shortcut, func(shortcut fyne.Shortcut) { getOpenMenuFunc(w, src, dst, filename)() })</code>. Cela permet au raccourci d'&ecirc;tre &eacute;cout&eacute; &agrave; tout moment lorsque la fen&ecirc;tre est en focus, et pas seulement lorsque le menu est d&eacute;roul&eacute;.</p></li><li class="list__item" id="-2o9vfi_266"><p id="-2o9vfi_267">Un menu <span class="emphasis" id="-2o9vfi_268">&quot;Fichier&quot;</span> contenant les &eacute;l&eacute;ments de menu <span class="emphasis" id="-2o9vfi_269">&quot;Ouvrir&quot;</span> et <span class="emphasis" id="-2o9vfi_270">&quot;Enregistrer&quot;</span> est cr&eacute;&eacute; avec <code class="code" id="-2o9vfi_271">fyne.NewMenu(&quot;File&quot;, openMenuItem, fyne.NewMenuItem(&quot;Save&quot;, getSaveMenuFunc(w, src)))</code>. Lorsque l'&eacute;l&eacute;ment de menu <span class="emphasis" id="-2o9vfi_272">&quot;Save&quot;</span> est cliqu&eacute;, il d&eacute;clenche &eacute;galement un dialogue de s&eacute;lection de fichier, mais cette fois pour sauver le contenu des deux zones de texte <code class="code" id="-2o9vfi_273">src</code> et <code class="code" id="-2o9vfi_274">dst</code> dans un fichier.</p></li><li class="list__item" id="-2o9vfi_275"><p id="-2o9vfi_276">Enfin, le menu principal de la fen&ecirc;tre est d&eacute;fini avec <code class="code" id="-2o9vfi_277">w.SetMainMenu(fyne.NewMainMenu(mainMenu))</code>.</p></li></ol><p id="-2o9vfi_278">Donc, essentiellement, le menu est construit en ajoutant des <code class="code" id="-2o9vfi_279">MenuItem</code> individuels &agrave; un <code class="code" id="-2o9vfi_280">Menu</code>, qui est ensuite ajout&eacute; &agrave; un <code class="code" id="-2o9vfi_281">MainMenu</code> qui est d&eacute;fini comme le menu principal de la fen&ecirc;tre. Chaque <code class="code" id="-2o9vfi_282">MenuItem</code> peut avoir une fonction associ&eacute;e qui sera d&eacute;clench&eacute;e lors du clic sur cet &eacute;l&eacute;ment de menu, ainsi qu'un raccourci clavier qui peut d&eacute;clencher la m&ecirc;me fonction.</p></section><div class="last-modified">Last modified: 29 avril 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="ch09s06-exemple-6-fichiers.html" class="navigation-links__prev">Exemple 6 : Fichiers</a><a href="ch09s08-exemple-8-listes.html" class="navigation-links__next">Exemple 8 : Listes</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.6.6-b224/app.js"></script></body></html>