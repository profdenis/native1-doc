<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2024-04-03T16:56:02.430511047"><title>Exemple 7 : Menu | Help Instance</title><script type="application/json" id="virtual-toc-data">[{"id":"construction-du-menu-et-des-raccourcis","level":0,"title":"Construction du menu et des raccourcis","anchor":"#construction-du-menu-et-des-raccourcis"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.6.6-b224/app.css" rel="stylesheet"><link rel="manifest" href="site.webmanifest"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Exemple 7 : Menu | Help Instance"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Help Instance Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/ch09s07-exemple-7-menu.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Exemple 7 : Menu | Help Instance"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/ch09s07-exemple-7-menu.html#webpage",
    "url": "writerside-documentation/ch09s07-exemple-7-menu.html",
    "name": "Exemple 7 : Menu | Help Instance",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Help Instance Help"
}</script><!-- End Schema.org --></head><body data-id="ch09s07-Exemple-7-Menu" data-main-title="Exemple 7 : Menu" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="ch09-Chapitre-9-Interfaces-graphiques.md|Chapitre 9 : Interfaces graphiques"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Help Instance  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="ch09s07-Exemple-7-Menu" id="ch09s07-Exemple-7-Menu.md">Exemple 7 : Menu</h1><p id="-8nnl8a_207"><a href="https://github.com/profdenis/native1/tree/master/chap9/07_menu" id="-8nnl8a_208" data-external="true" rel="noopener noreferrer">Code</a></p><p id="-8nnl8a_209">La fonction <code class="code" id="-8nnl8a_210">main</code> cr&eacute;e une nouvelle application Fyne, une fen&ecirc;tre au sein de cette application avec le titre <span class="emphasis" id="-8nnl8a_211">&quot;Exemple 07 : Menu et raccourcis&quot;</span>, ainsi que des labels et des champs de texte. Voici une explication plus d&eacute;taill&eacute;e ligne par ligne :</p><ul class="list _bullet" id="-8nnl8a_212"><li class="list__item" id="-8nnl8a_213"><p id="-8nnl8a_214"><code class="code" id="-8nnl8a_215">a := app.New()</code> initialise une nouvelle application Fyne.</p></li><li class="list__item" id="-8nnl8a_216"><p id="-8nnl8a_217"><code class="code" id="-8nnl8a_218">w := a.NewWindow(&quot;Exemple 07 : Menu et raccourcis&quot;)</code> cr&eacute;e une nouvelle fen&ecirc;tre dans cette application avec le titre donn&eacute;.</p></li><li class="list__item" id="-8nnl8a_219"><p id="-8nnl8a_220"><code class="code" id="-8nnl8a_221">src, dst := makeSrcDstEntries()</code> initialise <code class="code" id="-8nnl8a_222">src</code> et <code class="code" id="-8nnl8a_223">dst</code>, o&ugrave; <code class="code" id="-8nnl8a_224">src</code> est un champ de texte &agrave; lignes multiples et <code class="code" id="-8nnl8a_225">dst</code> est un widget affichant du texte enrichi. L'entr&eacute;e <code class="code" id="-8nnl8a_226">dst</code> se met &agrave; jour pour afficher le texte de l'entr&eacute;e <code class="code" id="-8nnl8a_227">src</code> analys&eacute; en tant que Markdown.</p></li><li class="list__item" id="-8nnl8a_228"><p id="-8nnl8a_229">Ensuite, il cr&eacute;e un &eacute;l&eacute;ment de menu <span class="emphasis" id="-8nnl8a_230">&quot;Ouvrir&quot;</span> qui d&eacute;clenche l'ouverture d'une bo&icirc;te de dialogue pour s&eacute;lectionner un fichier Markdown (<code class="code" id="-8nnl8a_231">.md</code>). Le contenu du document s&eacute;lectionn&eacute; est d&eacute;fini dans les entr&eacute;es <code class="code" id="-8nnl8a_232">src</code> et <code class="code" id="-8nnl8a_233">dst</code> de l'application. Cet &eacute;l&eacute;ment de menu est &eacute;galement li&eacute; au raccourci clavier <code class="code" id="-8nnl8a_234">Ctrl-O</code>.</p></li><li class="list__item" id="-8nnl8a_235"><p id="-8nnl8a_236">Un menu principal (<code class="code" id="-8nnl8a_237">mainMenu</code>) est ensuite cr&eacute;&eacute;, qui comprend l'&eacute;l&eacute;ment de menu <span class="emphasis" id="-8nnl8a_238">&quot;Ouvrir&quot;</span> et un &eacute;l&eacute;ment de menu <span class="emphasis" id="-8nnl8a_239">&quot;Enregistrer&quot;</span>. Lorsque l'on clique sur l'&eacute;l&eacute;ment de menu <span class="emphasis" id="-8nnl8a_240">&quot;Enregistrer&quot;</span>, une bo&icirc;te de dialogue de fichier s'ouvre pour sauvegarder le contenu actuel de l'entr&eacute;e <code class="code" id="-8nnl8a_241">src</code> en tant que fichier Markdown.</p></li><li class="list__item" id="-8nnl8a_242"><p id="-8nnl8a_243"><code class="code" id="-8nnl8a_244">w.SetMainMenu(mainMenu)</code> d&eacute;finit le <code class="code" id="-8nnl8a_245">mainMenu</code> dans la fen&ecirc;tre.</p></li><li class="list__item" id="-8nnl8a_246"><p id="-8nnl8a_247">Un s&eacute;parateur (ou diviseur) horizontal est cr&eacute;&eacute;, qui s&eacute;pare les entr&eacute;es <code class="code" id="-8nnl8a_248">src</code> et <code class="code" id="-8nnl8a_249">dst</code>.</p></li><li class="list__item" id="-8nnl8a_250"><p id="-8nnl8a_251"><code class="code" id="-8nnl8a_252">w.SetContent(container.NewBorder(filename, nil, nil, nil, split))</code> cr&eacute;e un nouveau conteneur avec le label <code class="code" id="-8nnl8a_253">filename</code>, qui est mis &agrave; jour avec le chemin du fichier actuellement ouvert, en haut, et le s&eacute;parateur cr&eacute;&eacute; au centre.</p></li><li class="list__item" id="-8nnl8a_254"><p id="-8nnl8a_255"><code class="code" id="-8nnl8a_256">w.Resize(fyne.NewSize(800, 600))</code> d&eacute;finit ensuite la taille de la fen&ecirc;tre &agrave; <code class="code" id="-8nnl8a_257">800x600</code> pixels.</p></li><li class="list__item" id="-8nnl8a_258"><p id="-8nnl8a_259"><code class="code" id="-8nnl8a_260">w.ShowAndRun()</code> affiche enfin la fen&ecirc;tre et commence la boucle principale de l'application.</p></li></ul><section class="chapter"><h2 id="construction-du-menu-et-des-raccourcis" data-toc="construction-du-menu-et-des-raccourcis">Construction du menu et des raccourcis</h2><ol class="list _decimal" id="-8nnl8a_261" type="1"><li class="list__item" id="-8nnl8a_262"><p id="-8nnl8a_263">Un &eacute;l&eacute;ment de menu <span class="emphasis" id="-8nnl8a_264">&quot;Ouvrir&quot;</span> est cr&eacute;&eacute; avec l'appel <code class="code" id="-8nnl8a_265">fyne.NewMenuItem(&quot;Open&quot;, getOpenMenuFunc(w, src, dst, filename))</code>. Ici, <span class="emphasis" id="-8nnl8a_266">&quot;Open&quot;</span> est le texte qui appara&icirc;tra dans l'&eacute;l&eacute;ment de menu, et <code class="code" id="-8nnl8a_267">getOpenMenuFunc(w, src, dst, filename)</code> est la fonction qui sera ex&eacute;cut&eacute;e lorsque l'&eacute;l&eacute;ment de menu sera cliqu&eacute;. La fonction <code class="code" id="-8nnl8a_268">getOpenMenuFunc</code> retourne une autre fonction qui ouvre un dialogue de s&eacute;lection de fichier lorsque l'utilisateur clique sur le bouton &quot;Open&quot;. Le fichier s&eacute;lectionn&eacute; sera lu et son contenu sera affich&eacute; dans les widgets <code class="code" id="-8nnl8a_269">src</code> et <code class="code" id="-8nnl8a_270">dst</code>.</p></li><li class="list__item" id="-8nnl8a_271"><p id="-8nnl8a_272">L'ic&ocirc;ne et le raccourci de l'&eacute;l&eacute;ment de menu <span class="emphasis" id="-8nnl8a_273">&quot;Ouvrir&quot;</span> sont d&eacute;finis avec les deux instructions suivantes :</p><div class="code-block" data-lang="go">
openMenuItem.Icon = theme.DocumentIcon()
openMenuItem.Shortcut = &amp;desktop.CustomShortcut{
        KeyName:  fyne.KeyO,
        Modifier: fyne.KeyModifierShortcutDefault,
}
</div><p id="-8nnl8a_275">Ici, <code class="code" id="-8nnl8a_276">theme.DocumentIcon()</code> est une ic&ocirc;ne standard pr&eacute;sente dans la biblioth&egrave;que Fyne et <code class="code" id="-8nnl8a_277">desktop.CustomShortcut{KeyName: fyne.KeyO, Modifier: fyne.KeyModifierShortcutDefault}</code> est un raccourci qui sera d&eacute;clench&eacute; lorsque l'utilisateur appuie sur <span class="emphasis" id="-8nnl8a_278">&quot;Cmd+O&quot;</span> (sur macOS) ou <span class="emphasis" id="-8nnl8a_279">&quot;Ctrl+O&quot;</span> (sur Windows/Linux).</p></li><li class="list__item" id="-8nnl8a_280"><p id="-8nnl8a_281">Le raccourci est &eacute;galement ajout&eacute; au Canvas de la fen&ecirc;tre avec <code class="code" id="-8nnl8a_282">w.Canvas().AddShortcut(openMenuItem.Shortcut, func(shortcut fyne.Shortcut) { getOpenMenuFunc(w, src, dst, filename)() })</code>. Cela permet au raccourci d'&ecirc;tre &eacute;cout&eacute; &agrave; tout moment lorsque la fen&ecirc;tre est en focus, et pas seulement lorsque le menu est d&eacute;roul&eacute;.</p></li><li class="list__item" id="-8nnl8a_283"><p id="-8nnl8a_284">Un menu <span class="emphasis" id="-8nnl8a_285">&quot;Fichier&quot;</span> contenant les &eacute;l&eacute;ments de menu <span class="emphasis" id="-8nnl8a_286">&quot;Ouvrir&quot;</span> et <span class="emphasis" id="-8nnl8a_287">&quot;Enregistrer&quot;</span> est cr&eacute;&eacute; avec <code class="code" id="-8nnl8a_288">fyne.NewMenu(&quot;File&quot;, openMenuItem, fyne.NewMenuItem(&quot;Save&quot;, getSaveMenuFunc(w, src)))</code>. Lorsque l'&eacute;l&eacute;ment de menu <span class="emphasis" id="-8nnl8a_289">&quot;Save&quot;</span> est cliqu&eacute;, il d&eacute;clenche &eacute;galement un dialogue de s&eacute;lection de fichier, mais cette fois pour sauver le contenu des deux zones de texte <code class="code" id="-8nnl8a_290">src</code> et <code class="code" id="-8nnl8a_291">dst</code> dans un fichier.</p></li><li class="list__item" id="-8nnl8a_292"><p id="-8nnl8a_293">Enfin, le menu principal de la fen&ecirc;tre est d&eacute;fini avec <code class="code" id="-8nnl8a_294">w.SetMainMenu(fyne.NewMainMenu(mainMenu))</code>.</p></li></ol><p id="-8nnl8a_295">Donc, essentiellement, le menu est construit en ajoutant des <code class="code" id="-8nnl8a_296">MenuItem</code> individuels &agrave; un <code class="code" id="-8nnl8a_297">Menu</code>, qui est ensuite ajout&eacute; &agrave; un <code class="code" id="-8nnl8a_298">MainMenu</code> qui est d&eacute;fini comme le menu principal de la fen&ecirc;tre. Chaque <code class="code" id="-8nnl8a_299">MenuItem</code> peut avoir une fonction associ&eacute;e qui sera d&eacute;clench&eacute;e lors du clic sur cet &eacute;l&eacute;ment de menu, ainsi qu'un raccourci clavier qui peut d&eacute;clencher la m&ecirc;me fonction.</p></section><div class="last-modified">Last modified: 03 avril 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="ch09s06-exemple-6-fichiers.html" class="navigation-links__prev">Exemple 6 : Fichiers</a><a href="ch09s08-exemple-8-listes.html" class="navigation-links__next">Exemple 8 : Listes</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.6.6-b224/app.js"></script></body></html>